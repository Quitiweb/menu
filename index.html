<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificador de Men칰 Mensual Familiar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: La app se reestructura a una SPA con navegaci칩n por semanas (1-4). La vista principal es una tabla de men칰 interactiva. Al hacer clic en un plato, se abre un modal con la receta, mejorando la UX al no perder el contexto. Cada semana tiene su propia lista de la compra din치mica. Esta arquitectura modular gestiona la informaci칩n de forma m치s limpia y responde directamente a la petici칩n del usuario de separar el contenido y mejorar la visualizaci칩n. -->
    <!-- Visualization & Content Choices: El men칰 semanal se presenta en una tabla HTML/JS para una visualizaci칩n clara. Las recetas se muestran en un modal (ventana emergente) creado con HTML/CSS/JS. Se mantiene el gr치fico de Chart.js en la gu칤a nutricional. La navegaci칩n entre semanas actualiza din치micamente la tabla y la lista de compras. Esta aproximaci칩n es m치s interactiva y organizada. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 50vh; }
        .nav-link-active { background-color: #fbbf24; color: #44403c; }
        #recipeModal { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-2xl font-bold text-amber-900 mb-2 sm:mb-0">Men칰 Familiar de Verano</h1>
            <nav id="main-nav" class="flex space-x-2 sm:space-x-4 text-sm sm:text-base font-medium text-stone-600">
                <a href="#semana1" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">General</a>
                <a href="#shopping" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Lista Compra</a>
                <a href="#guide" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Gu칤a Nutricional</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-8">

        <section id="semana1" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-stone-800">Planificador Mensual</h2>
            <p class="text-center text-stone-600 max-w-2xl mx-auto mb-6">
                Selecciona una semana para ver el men칰. Haz clic en cualquier plato de la tabla para ver la receta detallada al instante.
            </p>
            <div id="week-selector" class="flex justify-center gap-2 mb-8">
                <button data-week="1" class="week-btn py-2 px-5 rounded-full font-semibold text-stone-600 bg-white shadow-sm hover:bg-amber-200 transition-colors">Semana 1</button>
                <button data-week="2" class="week-btn py-2 px-5 rounded-full font-semibold text-stone-600 bg-white shadow-sm hover:bg-amber-200 transition-colors">Semana 2</button>
                <button data-week="3" class="week-btn py-2 px-5 rounded-full font-semibold text-stone-600 bg-white shadow-sm hover:bg-amber-200 transition-colors">Semana 3</button>
                <button data-week="4" class="week-btn py-2 px-5 rounded-full font-semibold text-stone-600 bg-white shadow-sm hover:bg-amber-200 transition-colors">Semana 4</button>
            </div>
            
            <div id="menu-table-container" class="overflow-x-auto bg-white p-4 rounded-xl shadow-md">
                
            </div>
        </section>

        <section id="shopping" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Lista de la Compra Semanal</h2>
            <p id="shopping-list-intro" class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Aqu칤 tienes los ingredientes para la semana seleccionada. Marca lo que ya tienes para facilitar la visita al supermercado.
            </p>
            <div id="shopping-list-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </section>

        <section id="guide" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Gu칤a Nutricional</h2>
             <p class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Los principios clave para una alimentaci칩n familiar saludable que aplicamos en todos nuestros men칰s.
            </p>
            <div id="guide-container" class="space-y-6"></div>
        </section>

    </main>
    
    <!-- Recipe Modal -->
    <div id="recipeModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div id="modal-content-wrapper" class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto modal-content scale-95">
             <div class="sticky top-0 bg-white/80 backdrop-blur-sm p-4 border-b flex justify-between items-center">
                <h3 id="modal-title" class="text-2xl font-bold text-stone-800"></h3>
                <button id="closeModal" class="text-stone-500 hover:text-stone-800 text-3xl">&times;</button>
            </div>
            <div id="modal-body" class="p-6"></div>
        </div>
    </div>


    <footer class="bg-stone-200 text-stone-600 text-center p-4 mt-16">
        <p>&copy; 2025 Planificador de Men칰 Familiar. Creado con 仇벒잺 para una alimentaci칩n feliz.</p>
    </footer>

    <script>
        const allWeeksData = {
            // Semana 1 (Original)
            1: {
                menu: {
                    'Lunes': { comida: 'Lentejas veraniegas con arroz y picadillo', cena: 'Crema fr칤a de pepino y aguacate con brochetas de pollo' },
                    'Martes': { comida: 'Pisto manchego con huevo escalfado', cena: 'Salm칩n al horno con patatas panaderas' },
                    'Mi칠rcoles': { comida: 'Gazpacho y filetes de ternera a la plancha', cena: 'Merluza en salsa verde con guisantes' },
                    'Jueves': { comida: '"Tacos" deconstruidos de pollo desmechado', cena: 'Pizza casera con base de coliflor' },
                    'Viernes': { comida: 'Ensalada de garbanzos y at칰n', cena: 'Hamburguesas de pavo y calabac칤n' },
                    'S치bado': { comida: 'Paella de marisco (sencilla)', cena: 'Noche de tapas: tortilla, ensaladilla...' },
                    'Domingo': { comida: 'Pollo asado con lim칩n y hierbas', cena: 'Sopa fr칤a de mel칩n con jam칩n' }
                },
                recipes: [
                    { name: 'Lentejas veraniegas con arroz y picadillo', intro: 'Versi칩n ligera del cl치sico, ideal para el calor.', ingredients: ['200g lentejas pardinas', '150g arroz', '1 zanahoria', 'Verduras para picadillo', 'AOVE, vinagre'], steps: ['Cocer lentejas con verduras muy picadas.', 'Cocer arroz.', 'Hacer picadillo y ali침ar.', 'Servir todo junto.'], adaptation: { hijo: 'Verduras integradas. Servir lentejas y arroz por separado. Picadillo como exposici칩n.', madre: 'A침adir lim칩n o vinagre para mejorar la absorci칩n de hierro.' } },
                    { name: 'Crema fr칤a de pepino y aguacate con brochetas de pollo', intro: 'Cena refrescante, hidratante y densa en nutrientes.', ingredients: ['1 pepino', '1 aguacate', '1 yogur', '250g pechuga de pollo', 'Lim칩n, menta'], steps: ['Triturar pepino, aguacate, yogur, lim칩n y menta. Refrigerar.', 'Marinar y hacer brochetas de pollo a la plancha.'], adaptation: { hijo: 'Textura suave. Brochetas divertidas. Ofrecer pepino crudo aparte.', madre: 'Grasas saludables del aguacate y AOVE. Muy hidratante.' } },
                    { name: 'Pisto manchego con huevo escalfado', intro: 'Un cl치sico lleno de hortalizas.', ingredients: ['1 calabac칤n', '2 pimientos', '1 cebolla', '400g tomate triturado', '3 huevos'], steps: ['Pochar verduras picadas.', 'A침adir tomate y cocinar a fuego lento.', 'Escalfar huevos y servir encima.'], adaptation: { hijo: 'Verduras bien integradas. Servir huevo frito o en tortilla si prefiere.', madre: 'Rico en vitaminas A y C. Huevo aporta colina.' } },
                    { name: 'Salm칩n al horno con patatas panaderas', intro: 'Cena elegante, sencilla y nutritiva. Fuente de omega-3 DHA.', ingredients: ['3 lomos salm칩n', '2 patatas', '1 manojo esp치rragos'], steps: ['Hornear patatas en rodajas finas.', 'A침adir salm칩n y esp치rragos y hornear 12-15 min m치s.'], adaptation: { hijo: 'Salm칩n sin piel ni espinas. Patatas son un 칠xito.', madre: 'Ideal por su aporte en DHA, esencial para el beb칠.' } },
                    { name: 'Gazpacho y filetes de ternera a la plancha', intro: 'Comida veraniega por excelencia.', ingredients: ['1kg tomates', '1 pepino', '1 pimiento', '3 filetes de ternera'], steps: ['Hacer gazpacho tradicional.', 'Hacer filetes a la plancha. Servir con ensalada.'], adaptation: { hijo: 'Gazpacho en vaso como "zumo". Filete en tiras.', madre: 'Ternera aporta hierro de alta biodisponibilidad.' } },
                    { name: 'Merluza en salsa verde con guisantes', intro: 'Plato tradicional, ligero y sabroso.', ingredients: ['3 lomos merluza', '250g almejas', '150g guisantes', 'Ajo, perejil'], steps: ['Hacer un sofrito de ajo y perejil.', 'A침adir merluza, guisantes y almejas. Cocer tapado.'], adaptation: { hijo: 'Textura suave. Servir sin espinas ni conchas. Espesar la salsa.', madre: 'Rico en yodo y prote칤nas.' } },
                    { name: 'Tacos deconstruidos de pollo desmechado', intro: 'Perfecto para comensales selectivos, fomenta la autonom칤a.', ingredients: ['2 pechugas de pollo', 'Tortillas de ma칤z', 'Acompa침amientos: lechuga, tomate, ma칤z, queso, aguacate'], steps: ['Cocer y desmechar el pollo.', 'Presentar todos los toppings en boles separados.'], adaptation: { hijo: 'M치ximo control para 칠l. Elige qu칠 poner.', madre: 'Comida completa y equilibrada.' } },
                    { name: 'Pizza casera con base de coliflor', intro: 'Forma sorprendente de integrar verduras.', ingredients: ['1 coliflor', '1 huevo', '50g queso', 'Salsa de tomate, toppings variados'], steps: ['Rallar coliflor, cocinar y escurrir muy bien.', 'Mezclar con huevo y queso, formar base y hornear.', 'A침adir toppings y hornear de nuevo.'], adaptation: { hijo: 'Coliflor "invisible". Involucrarlo en los toppings.', madre: 'Cena ligera, rica en fibra y vitaminas.' } },
                    { name: 'Ensalada de garbanzos y at칰n', intro: 'Ensalada de legumbres completa, r치pida y saciante.', ingredients: ['1 bote garbanzos', '2 latas at칰n', 'Huevo duro', 'Pimientos, cebolleta'], steps: ['Mezclar todos los ingredientes y ali침ar.'], adaptation: { hijo: 'Servir ingredientes por separado.', madre: 'Plato muy equilibrado para mantener la energ칤a.' } },
                    { name: 'Hamburguesas de pavo y calabac칤n', intro: 'Versi칩n saludable de comida r치pida.', ingredients: ['400g carne de pavo', '1/2 calabac칤n rallado', '1 boniato', 'Panecillos'], steps: ['Mezclar carne con calabac칤n rallado y formar hamburguesas.', 'Hacer "chips" de boniato al horno.'], adaptation: { hijo: 'Formato que le encanta con verdura integrada.', madre: 'Boniato rico en vitamina A, necesaria en lactancia.' } },
                    { name: 'Paella de marisco (sencilla)', intro: 'El plato festivo del fin de semana.', ingredients: ['300g arroz bomba', 'Calamares, gambas, mejillones', 'Caldo de pescado'], steps: ['Hacer sofrito, a침adir arroz y luego caldo. Cocer.', 'A침adir marisco al final.'], adaptation: { hijo: 'Arroz con "bichitos". Servir trozos limpios.', madre: 'Fuente de yodo, zinc y prote칤nas.' } },
                    { name: 'Noche de tapas: tortilla, ensaladilla...', intro: 'Cena informal y divertida.', ingredients: ['Patatas, huevos, espinacas', 'At칰n, mayonesa, verduras cocidas', 'Pan con tomate'], steps: ['Hacer tortilla con espinacas.', 'Hacer ensaladilla rusa.', 'Preparar pan con tomate.'], adaptation: { hijo: 'Formatos conocidos. Ensaladilla deconstruida si es necesario.', madre: 'Cena variada y completa.' } },
                    { name: 'Pollo asado con lim칩n y hierbas', intro: 'La comida familiar de domingo.', ingredients: ['1 pollo entero', 'Lim칩n, hierbas provenzales'], steps: ['Asar el pollo en el horno con lim칩n y hierbas.'], adaptation: { hijo: 'Pechuga sin piel ni huesos.', madre: 'Magn칤fica fuente de prote칤nas.' } },
                    { name: 'Sopa fr칤a de mel칩n con jam칩n', intro: 'Cena muy ligera, fresca y elegante.', ingredients: ['1/2 mel칩n', 'Jam칩n serrano', 'Menta'], steps: ['Triturar mel칩n con menta. Servir fr칤o con virutas de jam칩n.'], adaptation: { hijo: 'Presentar como un "batido" de mel칩n.', madre: 'Muy hidratante y ligera.' } },
                ],
                shopping: {
                    "Frutas y Verduras": ['Tomates (2kg)', 'Pepinos (2-3)', 'Calabacines (3-4)', 'Pimientos (2 verdes, 3 rojos)', 'Cebollas (1kg)', 'Ajos (1 cabeza)', 'Limones (3-4)', 'Patatas (1.5kg)', 'Boniato (1)', 'Coliflor (1)', 'Espinacas', 'Mel칩n (1)', 'Aguacates (2)', 'Menta'],
                    "Carnes y Pescados": ['Pechugas de pollo (250g)', 'Pollo entero (1)', 'Filetes de ternera (3)', 'Carne de pavo (400g)', 'Jam칩n serrano', 'Salm칩n (3 lomos)', 'Merluza (3 lomos)', 'Marisco para paella', 'Almejas'],
                    "L치cteos y Huevos": ['Huevos (1 docena)', 'Yogur natural', 'Queso (rallado, crema)'],
                    "Despensa": ['Lentejas', 'Arroz', 'Garbanzos', 'At칰n', 'Pan', 'Tortillas', 'Aceite, vinagre, sal, especias']
                }
            },
            // Semana 2
            2: {
                menu: {
                    'Lunes': { comida: 'Quinoa con verduras salteadas y pollo', cena: 'Crema de zanahoria y jengibre' },
                    'Martes': { comida: 'Alb칩ndigas de ternera en salsa de tomate casera', cena: 'Revuelto de champi침ones, gambas y ajetes' },
                    'Mi칠rcoles': { comida: 'Potaje de garbanzos con espinacas (versi칩n ligera)', cena: 'Dorada a la sal con ensalada de hinojo y naranja' },
                    'Jueves': { comida: 'Lasa침a de calabac칤n y carne', cena: 'Ajoblanco con uvas' },
                    'Viernes': { comida: 'Ensalada campera (patata, at칰n, huevo y verduras)', cena: 'Brochetas de pavo y pimientos' },
                    'S치bado': { comida: 'Fideu치 de marisco', cena: 'Noche de "bowls": base de arroz, toppings variados' },
                    'Domingo': { comida: 'Conejo al ajillo con patatas', cena: 'Ensalada C칠sar casera con pollo a la plancha' }
                },
                 recipes: [
                    { name: 'Quinoa con verduras salteadas y pollo', intro: 'Plato 칰nico muy completo, ligero y lleno de nutrientes.', ingredients: ['150g quinoa', '1 pechuga de pollo', 'Br칩coli, pimiento, calabac칤n', 'Salsa de soja (opcional)'], steps: ['Cocer quinoa.', 'Saltear verduras y pollo en tiras.', 'Mezclar todo.'], adaptation: { hijo: 'Servir quinoa, pollo y br칩coli por separado.', madre: 'Muy rico en prote칤nas y fibra.' } },
                    { name: 'Crema de zanahoria y jengibre', intro: 'Crema dulce y con un toque especial.', ingredients: ['500g zanahorias', '1 patata', '1 trocito jengibre', 'Caldo de ave'], steps: ['Cocer zanahorias y patata.', 'Triturar con jengibre rallado y caldo.'], adaptation: { hijo: 'Textura suave y color atractivo. Jengibre muy sutil.', madre: 'La zanahoria es una fuente excelente de betacarotenos.' } },
                    { name: 'Alb칩ndigas de ternera en salsa de tomate casera', intro: 'Un cl치sico que nunca falla, con salsa casera.', ingredients: ['400g carne picada ternera', '1 huevo', 'Ajo, perejil', 'Salsa de tomate casera'], steps: ['Mezclar carne con huevo, ajo y perejil. Formar alb칩ndigas.', 'Cocinarlas en la salsa de tomate.'], adaptation: { hijo: 'Formato y sabor que le encantar치. Verdura de la salsa triturada.', madre: 'Fuente de hierro y prote칤nas.' } },
                    { name: 'Dorada a la sal con ensalada de hinojo y naranja', intro: 'Una forma limpia y jugosa de cocinar pescado.', ingredients: ['1 dorada grande', '2kg sal gruesa para hornear', '1 hinojo', '1 naranja'], steps: ['Cubrir dorada con sal y hornear.', 'Limpiar pescado.', 'Hacer ensalada de hinojo y naranja.'], adaptation: { hijo: 'Pescado muy limpio y jugoso. Servir sin ensalada.', madre: 'Pescado blanco bajo en grasa y rico en prote칤nas.' } },
                    //... A침adir el resto de recetas para la semana 2
                ],
                shopping: {
                    "Frutas y Verduras": ['Zanahorias', 'Jengibre', 'Champi침ones', 'Ajetes', 'Espinacas', 'Hinojo', 'Naranja', 'Uvas', 'Pimientos', 'Br칩coli', 'Tomates para salsa'],
                    "Carnes y Pescados": ['Pechuga de pollo (1)', 'Carne picada ternera (400g)', 'Gambas', 'Dorada (1)', 'Pavo (250g)', 'Marisco para fideu치', 'Conejo'],
                    "L치cteos y Huevos": ['Huevos'],
                    "Despensa": ['Quinoa', 'Garbanzos', 'Fideos para fideu치', 'Almendras crudas (para ajoblanco)']
                }
            },
            // Semana 3
            3: {
                menu: {
                    'Lunes': { comida: 'Pasta integral con pesto de aguacate y tomates cherry', cena: 'Purrusalda (porrusalda) ligera' },
                    'Martes': { comida: 'Muslos de pollo al horno con boniato', cena: 'Sepia a la plancha con ajo y perejil' },
                    'Mi칠rcoles': { comida: 'Lentejas estofadas con chorizo (poca grasa)', cena: 'S치ndwich Club vegetal con hummus' },
                    'Jueves': { comida: 'Arroz al horno sencillo (costillas, garbanzos)', cena: 'Sopa de pescado y marisco' },
                    'Viernes': { comida: 'Empanada casera de at칰n y pimientos', cena: 'Tortilla francesa con esp치rragos y queso' },
                    'S치bado': { comida: 'Cusc칰s con pollo y verduras', cena: 'Pinchos morunos de pollo y ensalada' },
                    'Domingo': { comida: 'Caldereta de cordero sencilla', cena: 'Restos de la caldereta / Ensalada completa' }
                },
                 recipes: [
                    { name: 'Pasta integral con pesto de aguacate y tomates cherry', intro: 'Un pesto cremoso sin l치cteos, lleno de grasas saludables.', ingredients: ['250g pasta integral', '1 aguacate', 'Albahaca, ajo', 'Tomates cherry'], steps: ['Cocer pasta.', 'Triturar aguacate con albahaca, ajo y AOVE.', 'Mezclar con la pasta y los tomates.'], adaptation: { hijo: 'Pasta con "salsa verde de aguacate".', madre: 'Grasas saludables y fibra.' } },
                    { name: 'Purrusalda (porrusalda) ligera', intro: 'Un plato de cuchara vasco, reconfortante y sano.', ingredients: ['2 puerros', '2 patatas', '1 zanahoria', 'Caldo de verduras'], steps: ['Pochar puerro.', 'A침adir patata y zanahoria.', 'Cubrir con caldo y cocer.'], adaptation: { hijo: 'Textura suave. Se puede triturar si prefiere crema.', madre: 'Muy diur칠tico y ligero.' } },
                    //... A침adir el resto de recetas para la semana 3
                ],
                shopping: {
                    "Frutas y Verduras": ['Aguacate', 'Albahaca', 'Tomates cherry', 'Puerros', 'Boniato', 'Pimientos', 'Ajo', 'Perejil'],
                    "Carnes y Pescados": ['Muslos de pollo', 'Sepia', 'Chorizo (poca grasa)', 'Costillas de cerdo', 'At칰n en lata', 'Pollo para cusc칰s', 'Cordero para caldereta'],
                    "L치cteos y Huevos": ['Queso', 'Huevos'],
                    "Despensa": ['Pasta integral', 'Lentejas', 'Arroz', 'Garbanzos', 'Masa de empanada', 'Cusc칰s', 'Hummus']
                }
            },
             // Semana 4
            4: {
                menu: {
                    'Lunes': { comida: 'Jud칤as verdes con patata y huevo duro', cena: 'Crema de calabac칤n con quesitos' },
                    'Martes': { comida: 'Solomillo de cerdo en salsa de champi침ones', cena: 'Salpic칩n de marisco' },
                    'Mi칠rcoles': { comida: 'Arroz a la cubana (con tomate casero)', cena: 'Libritos de lomo y queso con ensalada' },
                    'Jueves': { comida: 'Guiso de patatas con calamares', cena: 'Berenjenas rellenas de pavo y verduras' },
                    'Viernes': { comida: 'Marmitako de bonito (o at칰n fresco)', cena: '"Fajitas" de pollo y pimientos' },
                    'S치bado': { comida: 'Risotto de setas', cena: 'Cena de picoteo: hummus, guacamole, palitos de verdura' },
                    'Domingo': { comida: 'Lomo de cerdo asado con manzanas', cena: 'Sopa juliana y tortilla' }
                },
                 recipes: [
                    { name: 'Jud칤as verdes con patata y huevo duro', intro: 'Un plato cl치sico, sencillo y muy completo.', ingredients: ['500g jud칤as verdes', '2 patatas', '3 huevos'], steps: ['Cocer las jud칤as y las patatas.', 'Cocer los huevos.', 'Servir todo junto ali침ado con AOVE.'], adaptation: { hijo: 'Ingredientes por separado. Un cl치sico que suele gustar.', madre: 'Plato equilibrado y de f치cil digesti칩n.' } },
                    { name: 'Crema de calabac칤n con quesitos', intro: 'La crema m치s suave y querida por los ni침os.', ingredients: ['2 calabacines', '1 patata', '1 cebolleta', '2-3 quesitos'], steps: ['Cocer las verduras.', 'Triturar todo junto con los quesitos.'], adaptation: { hijo: '칄xito asegurado. Textura perfecta.', madre: 'Ligera e hidratante.' } },
                    //... A침adir el resto de recetas para la semana 4
                ],
                shopping: {
                    "Frutas y Verduras": ['Jud칤as verdes', 'Patatas', 'Calabac칤n', 'Champi침ones', 'Cebolla', 'Pimientos', 'Berenjenas', 'Setas', 'Manzanas'],
                    "Carnes y Pescados": ['Solomillo de cerdo', 'Marisco para salpic칩n', 'Lomo de cerdo', 'Calamares', 'Carne de pavo picada', 'Bonito/at칰n fresco', 'Pechugas de pollo'],
                    "L치cteos y Huevos": ['Huevos', 'Quesitos', 'Queso en lonchas'],
                    "Despensa": ['Arroz', 'Tomate triturado', 'Tortillas para fajitas', 'Hummus', 'Guacamole']
                }
            }
        };

        const guideData = [
            {
                title: 'Gu칤a de Nutrici칩n para la Madre Lactante',
                content: `<p class="mb-4">La lactancia es un periodo de altas demandas. Se recomienda un aumento de 340-500 calor칤as nutritivas diarias y una excelente hidrataci칩n.</p><h4 class="font-bold mb-2 text-lg text-stone-700">Aumento de Micronutrientes Clave</h4><div class="chart-container mb-6"><canvas id="nutrientChart"></canvas></div><ul class="list-disc list-inside space-y-2"><li><strong>DHA (Omega-3):</strong> Fundamental para el cerebro del beb칠.</li><li><strong>Hierro:</strong> Esencial para prevenir la anemia.</li><li><strong>Calcio:</strong> Vital para proteger tu densidad 칩sea.</li></ul>`
            },
            {
                title: 'Gu칤a para el Comensal Selectivo (6 a침os)',
                content: `<p class="mb-4">La selectividad alimentaria es una fase com칰n. Abordarla con paciencia es clave. Adoptamos dos estrategias principales:</p><div class="grid md:grid-cols-2 gap-6"><div class="bg-amber-100/50 p-4 rounded-lg border border-amber-200"><h4 class="font-bold mb-2 text-lg text-stone-700">1. Divisi칩n de la Responsabilidad</h4><p><strong>Los padres deciden:</strong> qu칠, cu치ndo y d칩nde. <strong>El ni침o decide:</strong> si come y cu치nto.</p></div><div class="bg-teal-100/50 p-4 rounded-lg border border-teal-200"><h4 class="font-bold mb-2 text-lg text-stone-700">2. Integraci칩n + Exposici칩n</h4><p><strong>Integraci칩n:</strong> "Camuflar" verduras en salsas, cremas. <strong>Exposici칩n:</strong> Ofrecer la verdura en su forma original, sin presi칩n.</p></div></div>`
            }
        ];
        
        document.addEventListener('DOMContentLoaded', () => {
            const menuContainer = document.getElementById('menu-table-container');
            const shoppingListContainer = document.getElementById('shopping-list-container');
            const shoppingListIntro = document.getElementById('shopping-list-intro');
            const guideContainer = document.getElementById('guide-container');
            const weekSelector = document.getElementById('week-selector');
            
            const modal = document.getElementById('recipeModal');
            const modalContentWrapper = document.getElementById('modal-content-wrapper');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const closeModalBtn = document.getElementById('closeModal');

            function renderMenuTable(weekData) {
                const days = Object.keys(weekData.menu);
                let tableHTML = `
                    <table class="w-full text-sm text-left text-stone-600">
                        <thead class="text-xs text-stone-700 uppercase bg-stone-100">
                            <tr>
                                <th scope="col" class="px-6 py-3 rounded-tl-lg">D칤a</th>
                                <th scope="col" class="px-6 py-3">Comida</th>
                                <th scope="col" class="px-6 py-3 rounded-tr-lg">Cena</th>
                            </tr>
                        </thead>
                        <tbody>`;
                
                days.forEach(day => {
                    const meals = weekData.menu[day];
                    tableHTML += `
                        <tr class="bg-white border-b">
                            <th scope="row" class="px-6 py-4 font-bold text-stone-900 whitespace-nowrap">${day}</th>
                            <td class="px-6 py-4"><button class="recipe-btn text-amber-700 hover:underline" data-recipe='${JSON.stringify(meals.comida)}'>${meals.comida}</button></td>
                            <td class="px-6 py-4"><button class="recipe-btn text-teal-700 hover:underline" data-recipe='${JSON.stringify(meals.cena)}'>${meals.cena}</button></td>
                        </tr>`;
                });

                tableHTML += `</tbody></table>`;
                menuContainer.innerHTML = tableHTML;

                document.querySelectorAll('.recipe-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        const recipeName = JSON.parse(button.dataset.recipe);
                        const recipeData = weekData.recipes.find(r => r.name === recipeName) || { name: recipeName, intro: 'Receta no detallada.', ingredients: [], steps: [], adaptation: { hijo: 'N/A', madre: 'N/A' }};
                        openModal(recipeData);
                    });
                });
            }
            
            function openModal(recipe) {
                 modalTitle.textContent = recipe.name;
                 modalBody.innerHTML = `
                    <p class="italic text-stone-600 mb-6">${recipe.intro}</p>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <h4 class="font-bold text-lg mb-2 text-stone-700">Ingredientes</h4>
                            <ul class="list-disc list-inside text-stone-600 space-y-1">${recipe.ingredients.map(i => `<li>${i}</li>`).join('')}</ul>
                        </div>
                        <div class="lg:col-span-2">
                            <h4 class="font-bold text-lg mb-2 text-stone-700">Preparaci칩n</h4>
                            <ol class="list-decimal list-inside text-stone-600 space-y-2">${recipe.steps.map(s => `<li>${s}</li>`).join('')}</ol>
                        </div>
                    </div>
                    <div class="mt-6 bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg">
                        <h4 class="font-bold text-lg mb-2 text-amber-900">Adaptaci칩n Familiar (춰La Clave!)</h4>
                        <p class="text-stone-700"><strong class="font-semibold">游놌 Para Hugo (6 a침os):</strong> ${recipe.adaptation.hijo}</p>
                        <p class="text-stone-700 mt-2"><strong class="font-semibold">游뱜 Para la Mam치 (Lactancia):</strong> ${recipe.adaptation.madre}</p>
                    </div>
                 `;
                 modal.classList.remove('hidden');
                 setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modalContentWrapper.classList.remove('scale-95');
                 }, 10);
            }

            function closeModal() {
                modal.classList.add('opacity-0');
                modalContentWrapper.classList.add('scale-95');
                setTimeout(() => modal.classList.add('hidden'), 300);
            }

            function renderShoppingList(weekData) {
                shoppingListContainer.innerHTML = '';
                Object.entries(weekData.shopping).forEach(([category, items]) => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'bg-white p-6 rounded-xl shadow-sm border border-gray-200/50';
                    let itemsHtml = `<h3 class="text-2xl font-bold text-stone-800 mb-4">${category}</h3><ul class="space-y-2">`;
                    items.forEach(item => {
                        itemsHtml += `
                            <li>
                                <label class="flex items-center text-stone-700 cursor-pointer">
                                    <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3">
                                    <span>${item}</span>
                                </label>
                            </li>`;
                    });
                    itemsHtml += `</ul>`;
                    categoryDiv.innerHTML = itemsHtml;
                    shoppingListContainer.appendChild(categoryDiv);
                });
            }
            
            function renderWeek(weekNumber) {
                const weekData = allWeeksData[weekNumber];
                renderMenuTable(weekData);
                renderShoppingList(weekData);
                
                document.querySelectorAll('.week-btn').forEach(btn => {
                    btn.classList.toggle('nav-link-active', btn.dataset.week == weekNumber);
                });

                shoppingListIntro.textContent = `Aqu칤 tienes los ingredientes para la Semana ${weekNumber}. Marca lo que ya tienes para facilitar la visita al supermercado.`;
                location.hash = `semana${weekNumber}`;
            }
            
            weekSelector.addEventListener('click', (e) => {
                if (e.target.matches('.week-btn')) {
                    const week = e.target.dataset.week;
                    renderWeek(week);
                }
            });
            
            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if(e.target === modal) {
                    closeModal();
                }
            });

            // Render Guide
            guideData.forEach(section => {
                const sectionEl = document.createElement('div');
                sectionEl.className = 'bg-white rounded-xl shadow-sm border border-gray-200/50 p-6';
                sectionEl.innerHTML = `<h3 class="text-2xl font-bold mb-4 text-stone-800">${section.title}</h3>${section.content}`;
                guideContainer.appendChild(sectionEl);
            });
            
            // Initial render
            const initialWeek = location.hash.match(/semana(\d)/)?.[1] || '1';
            renderWeek(initialWeek);

            // Chart
            const nutrientChartCtx = document.getElementById('nutrientChart').getContext('2d');
            new Chart(nutrientChartCtx, {
                type: 'bar', data: { labels: ['Prote칤nas', 'Yodo', 'Zinc', 'Vitamina A', 'Vitamina C'], datasets: [{ label: 'Aumento recomendado', data: [25, 64, 50, 85, 60], backgroundColor: ['rgba(217, 119, 6, 0.6)', 'rgba(13, 148, 136, 0.6)', 'rgba(217, 119, 6, 0.6)', 'rgba(13, 148, 136, 0.6)', 'rgba(217, 119, 6, 0.6)'], borderWidth: 1 }] },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false }, title: { display: true, text: 'Aumento % aprox. sobre ingesta de referencia' } } }
            });
        });

    </script>
</body>
</html>
