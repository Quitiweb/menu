<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificador de Men√∫ Familiar de Verano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: He dise√±ado una SPA de tipo dashboard con navegaci√≥n fija superior para un acceso r√°pido a las 4 secciones clave: Men√∫ Semanal (vista por defecto), Recetario, Lista de Compra y Gu√≠a Nutricional. Esta estructura orientada a tareas es m√°s √∫til que el formato lineal del informe. El usuario puede ver qu√© toca comer hoy, hacer clic para ver la receta, marcar ingredientes en la lista de la compra o consultar la informaci√≥n nutricional. El flujo es intuitivo: seleccionar un d√≠a en el men√∫ revela las comidas, y cada comida enlaza a su receta detallada en formato acorde√≥n para no saturar la vista. Esta arquitectura prioriza la usabilidad y la rapidez en la consulta de informaci√≥n. -->
    <!-- Visualization & Content Choices: Men√∫ -> Calendario interactivo (HTML/JS) para seleccionar el d√≠a. Recetas -> Acordeones (HTML/JS) para mostrar/ocultar contenido y mantener la interfaz limpia. Lista de Compra -> Checklist interactiva (HTML/JS) para usabilidad en el supermercado. Gu√≠a Nutricional -> Texto y un gr√°fico de barras (Chart.js/Canvas) para visualizar de forma clara y atractiva el aumento de nutrientes recomendados para la madre lactante, haciendo la informaci√≥n cuantitativa m√°s digerible. Se usan iconos Unicode para a√±adir pistas visuales sin usar im√°genes. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 50vh; }
        .active-day { background-color: #fbbf24; color: #44403c; }
        .nav-link-active { color: #d97706; border-bottom-color: #d97706; }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <nav class="flex justify-center items-center">
                <ul id="main-nav" class="flex space-x-4 sm:space-x-8 text-sm sm:text-base font-medium text-stone-600">
                    <li><a href="#menu" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Men√∫ Semanal</a></li>
                    <li><a href="#recipes" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Recetario</a></li>
                    <li><a href="#shopping" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Lista de Compra</a></li>
                    <li><a href="#guide" class="p-2 border-b-2 border-transparent hover:text-amber-600 transition-colors duration-300">Gu√≠a Nutricional</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-8">

        <section id="hero" class="text-center mb-12 sm:mb-16">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-amber-900 mb-4">Men√∫ Familiar de Verano</h1>
            <p class="text-lg text-stone-600 max-w-3xl mx-auto">Una soluci√≥n deliciosa y equilibrada para las comidas de verano, pensada para toda la familia. Navega por las secciones para descubrir el plan semanal, las recetas y mucho m√°s.</p>
        </section>

        <section id="menu" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Planificador Semanal</h2>
             <p class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Aqu√≠ tienes el plan de comidas y cenas para toda la semana. Haz clic en un d√≠a para ver los platos propuestos y accede directamente a su receta. ¬°As√≠ de f√°cil es organizarse!
            </p>
            <div id="day-selector" class="flex flex-wrap justify-center gap-2 mb-8"></div>
            <div id="meal-display" class="min-h-[250px] transition-opacity duration-500"></div>
        </section>

        <section id="recipes" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Recetario Completo</h2>
             <p class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Cada receta est√° explicada paso a paso. Presta especial atenci√≥n a la secci√≥n "Adaptaci√≥n Familiar", la clave para cocinar un solo plato que todos disfrutar√°n, desde el m√°s peque√±o hasta los adultos.
            </p>
            <div id="recipes-container" class="space-y-4"></div>
        </section>

        <section id="shopping" class="scroll-mt-20 mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Lista de la Compra</h2>
             <p class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Para que no te olvides de nada en el supermercado, aqu√≠ tienes todos los ingredientes necesarios para la semana, organizados por categor√≠as. Puedes marcar los que ya tienes o vas comprando.
            </p>
            <div id="shopping-list-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </section>

        <section id="guide" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-8 text-stone-800">Gu√≠a Nutricional</h2>
             <p class="text-center text-stone-600 max-w-2xl mx-auto mb-8">
                Comprender el "porqu√©" de cada elecci√≥n te dar√° confianza en la cocina. Esta secci√≥n resume los principios clave para la nutrici√≥n de la madre lactante y las estrategias m√°s efectivas para el peque√±o comensal selectivo.
            </p>
            <div id="guide-container" class="space-y-6"></div>
        </section>

    </main>

    <footer class="bg-stone-200 text-stone-600 text-center p-4 mt-16">
        <p>&copy; 2025 Planificador de Men√∫ Familiar. Creado con ‚ù§Ô∏è para una alimentaci√≥n feliz.</p>
    </footer>

    <script>
        const menuData = {
            'Lunes': {
                comida: 'Lentejas veraniegas con arroz y picadillo de verduras',
                cena: 'Crema fr√≠a de pepino y aguacate con brochetas de pollo al lim√≥n'
            },
            'Martes': {
                comida: 'Pisto manchego con huevo escalfado y pan integral',
                cena: 'Salm√≥n al horno con patatas panaderas y esp√°rragos trigueros'
            },
            'Mi√©rcoles': {
                comida: 'Gazpacho andaluz y filetes de ternera a la plancha con ensalada',
                cena: 'Merluza en salsa verde con guisantes y almejas'
            },
            'Jueves': {
                comida: '"Tacos" deconstruidos con pollo desmechado y varios toppings',
                cena: 'Pizza casera con base de coliflor y toppings al gusto'
            },
            'Viernes': {
                comida: 'Ensalada de garbanzos, at√∫n, y verduras frescas',
                cena: 'Hamburguesas caseras de pavo y calabac√≠n con \'chips\' de boniato'
            },
            'S√°bado': {
                comida: 'Paella de marisco (versi√≥n sencilla)',
                cena: 'Noche de "tapas": Tortilla de patatas con espinacas, ensaladilla rusa y pan con tomate'
            },
            'Domingo': {
                comida: 'Pollo asado con lim√≥n y hierbas, y ensalada de tomate y pimiento',
                cena: 'Sopa fr√≠a de mel√≥n con jam√≥n y rollitos de calabac√≠n con queso'
            }
        };

        const recipesData = [
            {
                id: 'lentejas-veraniegas',
                name: 'Lentejas veraniegas con arroz y picadillo de verduras',
                intro: 'Una versi√≥n ligera y refrescante del cl√°sico guiso de lentejas, ideal para los d√≠as de calor. Este plato es una fuente excepcional de prote√≠nas vegetales, fibra y hierro.',
                ingredients: ['200g de lentejas pardinas (remojadas 2h)', '1 zanahoria peque√±a', '1/2 calabac√≠n', '1/2 cebolla', '1 diente de ajo', '1 hoja de laurel', '1 cda. piment√≥n dulce', '150g de arroz blanco', 'Para picadillo: 1/2 pimiento verde, 1/2 pimiento rojo, 1/4 cebolleta, 1 tomate', 'AOVE, vinagre de Jerez, sal'],
                steps: [
                    'Picar muy finamente cebolla, ajo, zanahoria y calabac√≠n.',
                    'Pochar cebolla y ajo. A√±adir zanahoria y calabac√≠n y cocinar 5 min.',
                    'A√±adir piment√≥n, remover e incorporar las lentejas escurridas y el laurel.',
                    'Cubrir con agua y cocinar a fuego lento 40-50 min. Salar al final.',
                    'Cocer el arroz seg√∫n las instrucciones del paquete. Escurrir.',
                    'Preparar el picadillo cortando las verduras en dados muy peque√±os. Ali√±ar.',
                    'Servir las lentejas con arroz y una cucharada de picadillo por encima.'
                ],
                adaptation: {
                    hijo: 'Las verduras ya est√°n integradas. Servir lentejas escurridas con el arroz al lado. El picadillo crudo se sirve aparte como exposici√≥n, sin presi√≥n.',
                    madre: 'A√±adir un chorrito extra de vinagre o lim√≥n. La vitamina C es crucial para maximizar la absorci√≥n del hierro de las lentejas.'
                }
            },
            {
                id: 'crema-pepino-aguacate',
                name: 'Crema fr√≠a de pepino y aguacate con brochetas de pollo al lim√≥n',
                intro: 'Una cena incre√≠blemente refrescante, hidratante y densa en nutrientes. El aguacate aporta grasas de alta calidad, beneficiosas para la leche materna.',
                ingredients: ['1 pepino grande', '1 aguacate maduro', '1/2 yogur natural', 'Zumo de 1/2 lim√≥n', 'Hojas de menta', '250g de pechuga de pollo en dados', 'Para marinar: zumo de 1/2 lim√≥n, ajo, or√©gano, sal, pimienta, AOVE', 'Brochetas de madera'],
                steps: [
                    'Marinar el pollo con lim√≥n, ajo, or√©gano, sal, pimienta y AOVE (m√≠n. 30 min).',
                    'Pelar y trocear el pepino. Poner en batidora.',
                    'A√±adir pulpa de aguacate, yogur, zumo de lim√≥n, menta, sal y AOVE.',
                    'Triturar hasta obtener una crema fina. Refrigerar.',
                    'Ensartar el pollo en brochetas y cocinar a la plancha hasta que est√© dorado.',
                    'Servir la crema fr√≠a con las brochetas.'
                ],
                adaptation: {
                    hijo: 'La crema tiene una textura suave y uniforme. Las brochetas son un formato divertido. Ofrecer palitos de pepino crudo al lado como exposici√≥n.',
                    madre: 'Cena ligera y nutritiva. El aguacate y el AOVE aportan grasas saludables y el pollo, prote√≠nas. La crema es muy hidratante.'
                }
            },
            {
                id: 'pisto-manchego',
                name: 'Pisto manchego con huevo escalfado y pan integral',
                intro: 'Un cl√°sico de la huerta, lleno de color y sabor. Una forma deliciosa de consumir una gran variedad de hortalizas. El huevo aporta prote√≠nas de alto valor biol√≥gico.',
                ingredients: ['1 cebolla', '1 pimiento verde', '1 pimiento rojo', '1 calabac√≠n grande', '400g de tomate triturado natural', '3 huevos', 'AOVE, sal, pimienta', '3 rebanadas de pan integral'],
                steps: [
                    'Picar cebolla y pimientos en dados. Pochar en una sart√©n grande con AOVE.',
                    'A√±adir el calabac√≠n en dados y cocinar 10-15 min.',
                    'Incorporar el tomate triturado, sal, pimienta. Cocinar a fuego lento 20-25 min.',
                    'Escalfar los huevos: en agua hirviendo suave, verter el huevo y cocinar 3-4 min.',
                    'Servir el pisto caliente con un huevo escalfado encima y pan tostado.'
                ],
                adaptation: {
                    hijo: 'El pisto es integraci√≥n perfecta, con textura suave. Servir pisto y huevo (frito o en tortilla si prefiere) al lado, no mezclados.',
                    madre: 'Plato rico en vitaminas A y C. El huevo aporta prote√≠nas y colina, importante para el desarrollo cerebral del beb√©.'
                }
            },
            {
                id: 'salmon-al-horno',
                name: 'Salm√≥n al horno con patatas panaderas y esp√°rragos trigueros',
                intro: 'Una cena elegante, sencilla y extraordinariamente nutritiva. El salm√≥n es una de las mejores fuentes de omega-3 DHA, esenciales para el beb√©.',
                ingredients: ['3 lomos de salm√≥n (150g c/u)', '2 patatas medianas', '1 manojo de esp√°rragos trigueros', '1/2 cebolla', 'Lim√≥n, eneldo, AOVE, sal, pimienta'],
                steps: [
                    'Precalentar horno a 200¬∞C.',
                    'Cortar patatas y cebolla en rodajas finas. Hornear 20 min con AOVE y sal.',
                    'A√±adir los esp√°rragos y el salm√≥n sobre las patatas.',
                    'Salpimentar el salm√≥n, a√±adir eneldo y una rodaja de lim√≥n.',
                    'Hornear todo junto durante 12-15 minutos m√°s.'
                ],
                adaptation: {
                    hijo: 'Servir salm√≥n sin piel ni espinas, con las patatas. Los esp√°rragos se pueden servir aparte (exposici√≥n).',
                    madre: 'Nutricionalmente ideal. El salm√≥n proporciona DHA y prote√≠nas. Las patatas aportan energ√≠a y los esp√°rragos, fibra y folato.'
                }
            },
             {
                id: 'gazpacho-ternera',
                name: 'Gazpacho andaluz y filetes de ternera a la plancha con ensalada',
                intro: 'Una comida veraniega por excelencia. El gazpacho es hidratante y vitam√≠nico, y la ternera aporta hierro de alta biodisponibilidad.',
                ingredients: ['Para gazpacho: 1kg tomates pera, 1 pimiento verde, 1 pepino, 1/4 cebolla, 1 ajo, AOVE, vinagre, sal', '3 filetes finos de ternera', 'Para ensalada: mezcla de lechugas, tomates cherry, ma√≠z'],
                steps: [
                    'Triturar todas las verduras del gazpacho con AOVE, vinagre y sal. Colar y refrigerar.',
                    'Cocinar los filetes de ternera a la plancha.',
                    'Preparar una ensalada simple y ali√±ar.',
                    'Servir el gazpacho fr√≠o y los filetes con la ensalada.'
                ],
                adaptation: {
                    hijo: 'Presentar el gazpacho en un vaso como un "zumo de tomate". Servir el filete en tiras y la ensalada con ingredientes separados.',
                    madre: 'La ternera es una fuente excelente de hierro hemo y zinc. El gazpacho hidrata y aporta vitamina C.'
                }
            },
            {
                id: 'merluza-salsa-verde',
                name: 'Merluza en salsa verde con guisantes y almejas',
                intro: 'Un plato tradicional, ligero y muy sabroso. La merluza es de f√°cil digesti√≥n y las almejas aportan un extra de hierro y sabor a mar.',
                ingredients: ['3 lomos de merluza', '250g almejas', '150g guisantes', '2 dientes de ajo', '1/2 cebolla', 'Perejil fresco', '1 cda. harina', '50ml vino blanco (opcional)', 'Caldo de pescado, AOVE, sal'],
                steps: [
                    'Poner las almejas en agua con sal 30 min.',
                    'Picar ajo, cebolla y perejil. Pochar ajo y cebolla.',
                    'A√±adir harina, tostarla. Verter vino, dejar evaporar. A√±adir perejil y caldo.',
                    'Incorporar merluza y guisantes. Cocinar 5 min.',
                    'A√±adir almejas, tapar y cocinar 3-4 min hasta que se abran.',
                ],
                adaptation: {
                    hijo: 'La merluza tiene textura suave. Servir un lomo limpio con guisantes y almejas sin concha. Espesar un poco la salsa.',
                    madre: 'Plato rico en yodo (merluza, almejas) y hierro (almejas). Bajo en grasa y muy nutritivo.'
                }
            },
            {
                id: 'tacos-deconstruidos',
                name: '"Tacos" deconstruidos con pollo desmechado y varios toppings',
                intro: 'La comida perfecta para comensales selectivos, ya que ofrece m√°ximo control. Cada uno monta su "taco" a su gusto, fomentando la autonom√≠a.',
                ingredients: ['2 pechugas de pollo', '1 cebolla, 1 laurel (para cocer)', 'Tortillas de trigo o ma√≠z', 'Acompa√±amientos: lechuga, tomate, ma√≠z, queso rallado, aguacate, yogur natural'],
                steps: [
                    'Cocer las pechugas en agua con cebolla y laurel 20-25 min.',
                    'Dejar templar y desmechar el pollo con dos tenedores.',
                    'Disponer todos los acompa√±amientos en boles separados.',
                    'Calentar las tortillas. Cada uno se sirve y monta sus tacos.'
                ],
                adaptation: {
                    hijo: 'Encarnaci√≥n de la "divisi√≥n de la responsabilidad". √âl ve todo por separado y elige qu√© poner. Le da control y fomenta que pruebe.',
                    madre: 'Comida muy completa: prote√≠nas (pollo), grasas saludables (aguacate), vitaminas (verduras) y calcio (yogur, queso).'
                }
            },
            {
                id: 'pizza-coliflor',
                name: 'Pizza casera con base de coliflor y toppings al gusto',
                intro: 'Una forma sorprendente de integrar verduras. La base de coliflor es baja en carbohidratos, rica en nutrientes y su sabor es muy suave.',
                ingredients: ['1 coliflor mediana', '1 huevo', '50g queso parmesano o mozzarella', 'Or√©gano, sal, pimienta', 'Toppings: salsa de tomate, queso, champi√±ones, pimiento, pavo...'],
                steps: [
                    'Precalentar horno a 200¬∞C. Rallar la coliflor.',
                    'Cocinar la coliflor rallada en el microondas 8 min. Dejar enfriar.',
                    'Exprimir la coliflor con un pa√±o limpio para eliminar todo el exceso de agua (paso crucial).',
                    'Mezclar coliflor, huevo, queso, sal, pimienta y or√©gano.',
                    'Extender la mezcla en forma de base de pizza y hornear 20 min.',
                    'A√±adir toppings y hornear 10 min m√°s.'
                ],
                adaptation: {
                    hijo: 'Coliflor perfectamente integrada. Involucrarlo en la colocaci√≥n de los toppings. Servir un ramillete de coliflor cocida al lado como exposici√≥n.',
                    madre: 'Cena ligera y nutritiva. La coliflor es rica en fibra y vitaminas. Fuente de prote√≠nas y calcio seg√∫n los toppings.'
                }
            },
            {
                id: 'ensalada-garbanzos',
                name: 'Ensalada de garbanzos, at√∫n, y verduras frescas',
                intro: 'Una ensalada de legumbres completa, r√°pida y perfecta para el verano. Muy saciante y nutritiva.',
                ingredients: ['1 bote grande de garbanzos cocidos', '2 latas de at√∫n', '1/2 pimiento rojo', '1/2 pimiento verde', '1/2 cebolleta', '1 huevo duro', 'Aceitunas negras', 'Ali√±o: AOVE, vinagre, sal'],
                steps: [
                    'Enjuagar y escurrir los garbanzos.',
                    'Picar los pimientos, la cebolleta y el huevo duro.',
                    'Mezclar todos los ingredientes en una ensaladera.',
                    'Ali√±ar generosamente, mezclar y dejar reposar 15 min en la nevera.'
                ],
                adaptation: {
                    hijo: 'Servir ingredientes por separado en su plato (montoncitos de garbanzos, at√∫n, huevo). Los pimientos crudos, aparte como exposici√≥n.',
                    madre: 'Plato muy equilibrado. Garbanzos (prote√≠na vegetal, fibra), at√∫n (prote√≠na, omega-3) y huevo. Ideal para mantener la energ√≠a.'
                }
            },
            {
                id: 'hamburguesas-pavo',
                name: 'Hamburguesas caseras de pavo y calabac√≠n con \'chips\' de boniato',
                intro: 'Una versi√≥n mucho m√°s saludable de la comida r√°pida. Integrar calabac√≠n rallado hace las hamburguesas m√°s jugosas y nutritivas.',
                ingredients: ['400g carne picada de pavo', '1/2 calabac√≠n', '1/4 cebolla', '1 ajo', 'Perejil, sal, pimienta', '1 boniato grande', 'Panecillos, lechuga, tomate'],
                steps: [
                    'Precalentar horno a 200¬∞C. Cortar el boniato en bastones, ali√±ar con AOVE y piment√≥n, y hornear 25-30 min.',
                    'Rallar y escurrir muy bien el calabac√≠n y la cebolla.',
                    'Mezclar la carne de pavo con el calabac√≠n, cebolla, ajo y perejil. Formar hamburguesas.',
                    'Cocinar las hamburguesas a la plancha.',
                    'Montar las hamburguesas y servir con los chips de boniato.'
                ],
                adaptation: {
                    hijo: 'Calabac√≠n y cebolla integrados en un formato que le encanta. Los chips de boniato son una alternativa dulce y saludable a las patatas fritas.',
                    madre: 'Pavo (prote√≠na magra), calabac√≠n (fibra, vitaminas) y boniato (rico en betacarotenos/vitamina A, muy necesaria en la lactancia).'
                }
            },
            {
                id: 'paella-marisco',
                name: 'Paella de marisco (versi√≥n sencilla)',
                intro: 'El plato festivo del fin de semana. Esta versi√≥n simplificada mantiene todo el sabor con menos complicaciones.',
                ingredients: ['300g arroz bomba', '200g anillas de calamar', '150g gambas peladas', '8-10 mejillones', '1/2 pimiento rojo', '1 tomate rallado', '2 ajos', 'Azafr√°n o colorante', '900ml caldo de pescado', 'AOVE, sal'],
                steps: [
                    'Abrir los mejillones al vapor. Reservar.',
                    'Sofre√≠r tiras de pimiento rojo y reservar.',
                    'En el mismo aceite, sofre√≠r ajo y calamares. A√±adir tomate y cocinar.',
                    'Incorporar el arroz y el azafr√°n, sofre√≠r 1 min.',
                    'Verter el caldo caliente. Cocinar a fuego fuerte 10 min y bajo 8-10 min.',
                    'A 5 min del final, a√±adir gambas, mejillones y pimiento. Reposar 5 min.'
                ],
                adaptation: {
                    hijo: 'Servirle arroz con trozos de calamar y gambas. Ofrecer un mejill√≥n aparte como exposici√≥n.',
                    madre: 'El marisco es una excelente fuente de yodo, zinc y prote√≠nas. Comida completa para reponer energ√≠as.'
                }
            },
            {
                id: 'noche-tapas',
                name: 'Noche de "tapas": Tortilla de patatas con espinacas, ensaladilla rusa y pan con tomate',
                intro: 'Una cena informal y divertida, perfecta para el s√°bado. Permite ofrecer una variedad de alimentos y texturas en peque√±as porciones.',
                ingredients: ['Para tortilla: 3 patatas, 1/2 cebolla, 4 huevos, un pu√±ado de espinacas', 'Para ensaladilla: 2 patatas, 1 zanahoria, 1 lata de at√∫n, guisantes, mayonesa', 'Para pan con tomate: pan, ajo, tomate maduro, AOVE, sal'],
                steps: [
                    'Tortilla: Preparar una tortilla de patatas tradicional y a√±adir espinacas picadas a los huevos batidos.',
                    'Ensaladilla: Cocer patatas y zanahoria. Picar en dados y mezclar con at√∫n, guisantes y mayonesa.',
                    'Pan con tomate: Tostar pan, frotar con ajo y tomate. Ali√±ar con AOVE y sal.'
                ],
                adaptation: {
                    hijo: 'La tortilla es un plato aceptado (espinacas integradas). Servir la ensaladilla deconstruida si no le gustan las mezclas. El pan con tomate no falla.',
                    madre: 'Cena variada que aporta hidratos (patata), prote√≠nas (huevo, at√∫n), grasas saludables (AOVE, mayonesa) y vitaminas.'
                }
            },
            {
                id: 'pollo-asado',
                name: 'Pollo asado con lim√≥n y hierbas, y ensalada de tomate y pimiento',
                intro: 'La comida familiar de domingo por excelencia. Un plato reconfortante, f√°cil de preparar y que gusta a todos.',
                ingredients: ['1 pollo entero (o 3 cuartos)', '1 lim√≥n', 'Hierbas provenzales', '2-3 dientes de ajo', 'AOVE, sal, pimienta', 'Para ensalada: 2 tomates, 1 pimiento verde, 1/2 cebolleta'],
                steps: [
                    'Precalentar horno a 190¬∞C.',
                    'Salpimentar el pollo. Introducir medio lim√≥n y ajos enteros dentro.',
                    'Colocar en una fuente, rociar con zumo de lim√≥n, hierbas y AOVE.',
                    'Asar 1h 15 min aprox, regando con sus jugos.',
                    'Preparar la ensalada y ali√±ar.',
                    'Servir el pollo troceado con su jugo y la ensalada.'
                ],
                adaptation: {
                    hijo: 'Servirle pechuga (sin piel ni huesos), de textura uniforme. La ensalada se sirve aparte como exposici√≥n.',
                    madre: 'El pollo asado es una magn√≠fica fuente de prote√≠nas. La ensalada aporta vitaminas y frescor. Comida nutritiva y tradicional.'
                }
            },
            {
                id: 'sopa-melon',
                name: 'Sopa fr√≠a de mel√≥n con jam√≥n y rollitos de calabac√≠n con queso',
                intro: 'Una cena muy ligera, fresca y elegante para terminar la semana. La combinaci√≥n dulce y salada es un cl√°sico del verano.',
                ingredients: ['1/2 mel√≥n Piel de Sapo', 'Hojas de menta', '50g jam√≥n serrano', '1 calabac√≠n', '100g queso crema o reques√≥n', 'Nueces picadas (opcional)', 'AOVE, sal, pimienta'],
                steps: [
                    'Triturar el mel√≥n con la menta hasta obtener una sopa fina. Refrigerar.',
                    'Cortar l√°minas finas de calabac√≠n a lo largo.',
                    'Pasar las l√°minas por la plancha 1 min por lado para ablandarlas.',
                    'Mezclar el queso crema con sal, pimienta y nueces.',
                    'Untar cada l√°mina de calabac√≠n con el queso y enrollarla.',
                    'Servir la sopa fr√≠a con virutas de jam√≥n, acompa√±ada de los rollitos.'
                ],
                adaptation: {
                    hijo: 'La sopa de mel√≥n puede presentarse como un "batido". Los rollitos son un formato divertido, con relleno familiar.',
                    madre: 'Cena muy hidratante y ligera. El mel√≥n es rico en vitaminas y agua. El jam√≥n y el queso aportan prote√≠nas y calcio.'
                }
            },
        ];

        const shoppingListData = {
            "Frutas y Verduras": ['Tomates (2kg)', 'Pepinos (2-3)', 'Calabacines (3-4)', 'Pimientos (2 verdes, 3 rojos)', 'Cebollas (1kg)', 'Cebolletas (2)', 'Ajos (1 cabeza)', 'Limones (3-4)', 'Patatas (1.5kg)', 'Boniato (1 grande)', 'Zanahorias (2-3)', 'Esp√°rragos trigueros (1 manojo)', 'Coliflor (1 mediana)', 'Espinacas frescas (1 bolsa)', 'Lechuga (1 bolsa)', 'Mel√≥n (1 mediano)', 'Aguacates (2)', 'Perejil fresco', 'Menta o hierbabuena'],
            "Carnes y Pescados": ['Pechugas de pollo (800g)', 'Pollo entero (1.2kg)', 'Filetes de ternera (3-4)', 'Carne picada de pavo (400g)', 'Jam√≥n serrano (100g)', 'Lomos de salm√≥n (450g)', 'Lomos de merluza (450g)', 'Anillas de calamar (200g)', 'Gambas peladas (150g)', 'Mejillones (500g)', 'Almejas (250g)', 'At√∫n en lata (3)'],
            "L√°cteos y Huevos": ['Huevos (1 docena)', 'Yogur natural', 'Queso rallado', 'Queso parmesano', 'Queso crema o reques√≥n'],
            "Legumbres, Cereales y Pan": ['Lentejas pardinas (500g)', 'Garbanzos cocidos (1 bote)', 'Arroz (1kg)', 'Pan integral', 'Tortillas de trigo/ma√≠z', 'Panecillos de hamburguesa'],
            "Despensa y Condimentos": ['Aceite de Oliva Virgen Extra', 'Vinagre de Jerez', 'Sal yodada', 'Pimienta negra', 'Piment√≥n dulce', 'Or√©gano', 'Hierbas provenzales', 'Laurel', 'Azafr√°n/Colorante', 'Vino blanco (opcional)', 'Caldo de pescado', 'Ma√≠z dulce en lata', 'Aceitunas negras', 'Nueces (opcional)']
        };

        const guideData = [
            {
                title: 'Gu√≠a de Nutrici√≥n para la Madre Lactante',
                content: `
                    <p class="mb-4">La lactancia es un periodo de altas demandas. La dieta debe sostener tu salud y proveer componentes para leche nutritiva. Se recomienda un aumento de 340-500 calor√≠as nutritivas diarias y una excelente hidrataci√≥n (unos 10-12 vasos de agua).</p>
                    <h4 class="font-bold mb-2 text-lg text-stone-700">Aumento de Micronutrientes Clave</h4>
                    <p class="mb-4">Este gr√°fico visualiza el aumento porcentual recomendado en la ingesta diaria de algunos nutrientes clave durante la lactancia, comparado con una mujer no lactante.</p>
                    <div class="chart-container mb-6">
                        <canvas id="nutrientChart"></canvas>
                    </div>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>DHA (Omega-3):</strong> Fundamental para el cerebro del beb√©. Priorizar pescado azul de bajo mercurio como el salm√≥n.</li>
                        <li><strong>Hierro:</strong> Esencial para prevenir la anemia. Combinar fuentes vegetales (lentejas) con vitamina C (pimiento, lim√≥n) para mejorar su absorci√≥n.</li>
                        <li><strong>Calcio:</strong> Vital para proteger tu densidad √≥sea. Asegurar consumo de l√°cteos, quesos y verduras de hoja verde.</li>
                    </ul>
                    <p class="mt-4 text-sm text-stone-500"><strong>Importante:</strong> Limita la cafe√≠na y evita el alcohol y pescados con alto contenido en mercurio (pez espada, tibur√≥n).</p>
                `
            },
            {
                title: 'Gu√≠a para el Comensal Selectivo (6 a√±os)',
                content: `
                    <p class="mb-4">La selectividad alimentaria es una fase com√∫n. Abordarla con paciencia es clave. Adoptamos dos estrategias principales:</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-amber-100/50 p-4 rounded-lg border border-amber-200">
                            <h4 class="font-bold mb-2 text-lg text-stone-700">1. Divisi√≥n de la Responsabilidad</h4>
                            <p><strong>Los padres deciden:</strong> qu√©, cu√°ndo y d√≥nde se come.<br><strong>El ni√±o decide:</strong> si come y cu√°nto come de lo ofrecido. Esto reduce la presi√≥n y le da autonom√≠a.</p>
                        </div>
                        <div class="bg-teal-100/50 p-4 rounded-lg border border-teal-200">
                             <h4 class="font-bold mb-2 text-lg text-stone-700">2. Estrategia Dual: Integraci√≥n + Exposici√≥n</h4>
                            <p><strong>Integraci√≥n:</strong> "Camuflar" verduras en salsas, cremas o masas (ej. pisto, hamburguesas) para asegurar nutrientes.<br><strong>Exposici√≥n:</strong> Ofrecer siempre una peque√±a cantidad de la verdura en su forma original, sin presi√≥n para que la coma. La familiaridad reduce el miedo.</p>
                        </div>
                    </div>
                     <h4 class="font-bold mt-6 mb-2 text-lg text-stone-700">Consejos Clave</h4>
                     <ul class="list-disc list-inside space-y-2">
                        <li><strong>Involucra al ni√±o:</strong> Deja que ayude a lavar verduras o poner la mesa.</li>
                        <li><strong>Presentaci√≥n divertida:</strong> Usa cortadores de galletas, crea caras con la comida.</li>
                        <li><strong>Evita los "No":</strong> No fuerces, no presiones, no castigues, no uses la comida como premio.</li>
                     </ul>
                `
            }
        ];
        
        document.addEventListener('DOMContentLoaded', () => {
            const daySelector = document.getElementById('day-selector');
            const mealDisplay = document.getElementById('meal-display');
            const recipesContainer = document.getElementById('recipes-container');
            const shoppingListContainer = document.getElementById('shopping-list-container');
            const guideContainer = document.getElementById('guide-container');

            function getRecipeId(mealName) {
                return mealName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');
            }

            function displayMeals(day) {
                const meals = menuData[day];
                const comidaId = getRecipeId(meals.comida);
                const cenaId = getRecipeId(meals.cena);
                
                mealDisplay.style.opacity = 0;
                setTimeout(() => {
                    mealDisplay.innerHTML = `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200/50">
                                <h3 class="text-2xl font-bold mb-3 text-amber-800">Comida</h3>
                                <p class="text-lg text-stone-700 mb-4">${meals.comida}</p>
                                <a href="#recipe-${comidaId}" class="inline-block bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">Ver Receta</a>
                            </div>
                            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200/50">
                                <h3 class="text-2xl font-bold mb-3 text-teal-800">Cena</h3>
                                <p class="text-lg text-stone-700 mb-4">${meals.cena}</p>
                                <a href="#recipe-${cenaId}" class="inline-block bg-teal-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-teal-600 transition-colors">Ver Receta</a>
                            </div>
                        </div>
                    `;
                    mealDisplay.style.opacity = 1;
                }, 200);

                document.querySelectorAll('#day-selector button').forEach(btn => {
                    btn.classList.toggle('active-day', btn.textContent === day);
                });
            }

            Object.keys(menuData).forEach(day => {
                const dayButton = document.createElement('button');
                dayButton.textContent = day;
                dayButton.className = 'py-2 px-4 rounded-full font-semibold text-stone-600 bg-white shadow-sm hover:bg-amber-200 transition-colors';
                dayButton.addEventListener('click', () => displayMeals(day));
                daySelector.appendChild(dayButton);
            });

            recipesData.forEach(recipe => {
                const recipeId = getRecipeId(recipe.name);
                const recipeEl = document.createElement('div');
                recipeEl.className = 'bg-white rounded-xl shadow-sm border border-gray-200/50 overflow-hidden';
                recipeEl.id = `recipe-${recipeId}`;
                recipeEl.innerHTML = `
                    <button class="w-full text-left p-4 sm:p-5 flex justify-between items-center bg-stone-100 hover:bg-stone-200 transition-colors">
                        <h3 class="text-xl font-bold text-stone-800">${recipe.name}</h3>
                        <span class="transform transition-transform duration-300 text-amber-600 text-2xl font-light">Ôºã</span>
                    </button>
                    <div class="p-6 hidden">
                        <p class="italic text-stone-600 mb-6">${recipe.intro}</p>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1">
                                <h4 class="font-bold text-lg mb-2 text-stone-700">Ingredientes</h4>
                                <ul class="list-disc list-inside text-stone-600 space-y-1">${recipe.ingredients.map(i => `<li>${i}</li>`).join('')}</ul>
                            </div>
                            <div class="lg:col-span-2">
                                <h4 class="font-bold text-lg mb-2 text-stone-700">Preparaci√≥n</h4>
                                <ol class="list-decimal list-inside text-stone-600 space-y-2">${recipe.steps.map(s => `<li>${s}</li>`).join('')}</ol>
                            </div>
                        </div>
                        <div class="mt-6 bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg">
                            <h4 class="font-bold text-lg mb-2 text-amber-900">Adaptaci√≥n Familiar (¬°La Clave!)</h4>
                            <p class="text-stone-700"><strong class="font-semibold">üë∂ Para Hugo (6 a√±os):</strong> ${recipe.adaptation.hijo}</p>
                            <p class="text-stone-700 mt-2"><strong class="font-semibold">ü§± Para la Mam√° (Lactancia):</strong> ${recipe.adaptation.madre}</p>
                        </div>
                    </div>
                `;
                recipesContainer.appendChild(recipeEl);

                const button = recipeEl.querySelector('button');
                // --- INICIO DE LA CORRECCI√ìN ---
                // El selector original era demasiado gen√©rico y seleccionaba el propio bot√≥n.
                // Esta versi√≥n selecciona de forma fiable el siguiente elemento hermano, que es el div del contenido.
                const content = button.nextElementSibling;
                // --- FIN DE LA CORRECCI√ìN ---
                const icon = recipeEl.querySelector('span');

                button.addEventListener('click', () => {
                    const isHidden = content.classList.contains('hidden');
                    content.classList.toggle('hidden');
                    icon.textContent = isHidden ? '‚àí' : 'Ôºã';
                    icon.classList.toggle('rotate-45', isHidden);
                });
            });

            Object.entries(shoppingListData).forEach(([category, items]) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'bg-white p-6 rounded-xl shadow-sm border border-gray-200/50';
                let itemsHtml = `<h3 class="text-2xl font-bold text-stone-800 mb-4">${category}</h3><ul class="space-y-2">`;
                items.forEach(item => {
                    itemsHtml += `
                        <li>
                            <label class="flex items-center text-stone-700 cursor-pointer">
                                <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500 mr-3">
                                <span>${item}</span>
                            </label>
                        </li>`;
                });
                itemsHtml += `</ul>`;
                categoryDiv.innerHTML = itemsHtml;
                shoppingListContainer.appendChild(categoryDiv);
            });

            guideData.forEach(section => {
                const sectionEl = document.createElement('div');
                sectionEl.className = 'bg-white rounded-xl shadow-sm border border-gray-200/50 p-6';
                sectionEl.innerHTML = `
                    <h3 class="text-2xl font-bold mb-4 text-stone-800">${section.title}</h3>
                    ${section.content}
                `;
                guideContainer.appendChild(sectionEl);
            });
            
            displayMeals('Lunes');

            const nutrientChartCtx = document.getElementById('nutrientChart').getContext('2d');
            new Chart(nutrientChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Prote√≠nas (+15g)', 'Yodo (+140¬µg)', 'Zinc (+4mg)', 'Vitamina A (+600¬µg)', 'Vitamina C (+45mg)'],
                    datasets: [{
                        label: 'Aumento recomendado en lactancia',
                        data: [25, 64, 50, 85, 60],
                        backgroundColor: [
                            'rgba(217, 119, 6, 0.6)',
                            'rgba(13, 148, 136, 0.6)',
                            'rgba(217, 119, 6, 0.6)',
                             'rgba(13, 148, 136, 0.6)',
                             'rgba(217, 119, 6, 0.6)'
                        ],
                        borderColor: [
                            'rgb(217, 119, 6)',
                            'rgb(13, 148, 136)',
                            'rgb(217, 119, 6)',
                            'rgb(13, 148, 136)',
                            'rgb(217, 119, 6)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Aumento % aprox. sobre la ingesta de referencia' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${context.raw}% de aumento`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                callback: function(value) { return value + '%' }
                            }
                        }
                    }
                }
            });

            const navLinks = document.querySelectorAll('#main-nav a');
            const sections = document.querySelectorAll('main section');
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('nav-link-active');
                    if(link.getAttribute('href') === `#${current}`) {
                        link.classList.add('nav-link-active');
                    }
                });
            });
        });

    </script>
</body>
</html>
